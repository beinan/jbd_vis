<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../../../">
  <title data-ice="title">jbd_vis/client/components/seq_diagram/signal.jsx | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
</head>
<body class="layout-container">

<header>
  <a href="./">Home</a>
  <a href="identifiers.html">Identifier</a>
  <a href="source.html">Source</a>
  
  <a data-ice="repoURL" href="https://github.com/beinan/jbd_vis.git" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div data-ice="classWrap">
  <h2>Class</h2>
  <ul>
    
  <li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/seq_diagram/actor.jsx~Actor.html">Actor</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/actions/admin_action.js~AdminAction.html">AdminAction</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/admin/admin_components.jsx~AdminJobsBox.html">AdminJobsBox</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/admin/admin_monitor_view.jsx~AdminMonitorView.html">AdminMonitorView</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/admin/admin_question_view.jsx~AdminQuestionView.html">AdminQuestionView</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/actions/app_action.js~AppAction.html">AppAction</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/assignment_view.jsx~AssignmentView.html">AssignmentView</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/actions/assignments_action.js~AssignmentsAction.html">AssignmentsAction</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/actions/common_store_action.js~CommonStoreAction.html">CommonStoreAction</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/common_components.jsx~ContentBox.html">ContentBox</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/common_components.jsx~ContentSection.html">ContentSection</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/content_wrapper.jsx~ContentWrapper.html">ContentWrapper</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/replay_controls/control_side_bar.jsx~ControlSideBar.html">ControlSideBar</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/frame.jsx~Frame.html">Frame</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/common_components.jsx~ImmutablePropComponent.html">ImmutablePropComponent</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/actions/jvm_action.js~JVMAction.html">JVMAction</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/stores/job_store.js~JobStore.html">JobStore</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/replay_controls/jvm_list_drowdown.jsx~JvmListDrowDown.html">JvmListDrowDown</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/stores/jvm_store.js~JvmStore.html">JvmStore</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/views/jvms_view.jsx~JvmsView.html">JvmsView</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/seq_diagram/lifeline.jsx~Lifeline.html">Lifeline</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/main_side_bar.jsx~MainSideBar.html">MainSideBar</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/common_components.jsx~PureRenderCommponent.html">PureRenderCommponent</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/replay_controls/replay_panel.jsx~ReplayPanel.html">ReplayPanel</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/stores/replay_store.js~ReplayStore.html">ReplayStore</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/stores/seq_diag_store.js~SeqDiagStore.html">SeqDiagStore</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/seq_diagram/seq_diagram.jsx~SeqDiagram.html">SeqDiagram</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/seq_diagram/signal.jsx~Signal.html">Signal</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/actions/simulation_action.js~SimulationAction.html">SimulationAction</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/views/simulation_view.jsx~SimulationView.html">SimulationView</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/stores/store_factory.js~StoreFactory.html">StoreFactory</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/common_components.jsx~UploadFileForm.html">UploadFileForm</a></span></li>
</ul>
</div>





<div data-ice="variableWrap">
  <h2><a href="variable/">Variable</a></h2>
  <ul>
    
  <li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-AdminJobsStore">AdminJobsStore</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-AppStore">AppStore</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-AssignmentsStore">AssignmentsStore</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-EventEmitter">EventEmitter</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-JvmListStore">JvmListStore</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-SessionStore">SessionStore</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-SimulationStore">SimulationStore</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-actor">actor</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-adminMonitorView">adminMonitorView</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-adminQuestionView">adminQuestionView</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-assignmentView">assignmentView</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-contentWrapper">contentWrapper</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-controlSideBar">controlSideBar</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-frame">frame</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-instance">instance</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-instance">instance</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-instance">instance</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-instance">instance</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-instance">instance</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-instance">instance</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-instance">instance</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-jobStore">jobStore</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-jvmListDrowDown">jvmListDrowDown</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-jvmStore">jvmStore</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-jvmsView">jvmsView</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-lifeline">lifeline</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-mainSideBar">mainSideBar</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-replayPanel">replayPanel</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-replayStore">replayStore</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-seqDiagStore">seqDiagStore</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-seqDiagram">seqDiagram</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-signal">signal</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-simulationView">simulationView</a></span></li>
</ul>
</div>




</nav>

<div class="content" data-ice="content"><h1 data-ice="title">jbd_vis/client/components/seq_diagram/signal.jsx</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import React from &apos;react&apos;

import SimulationAction from &apos;../../actions/simulation_action&apos;

const default_bar_style = {opacity:0};
const mouseover_bar_style = {opacity:0.2, fill:&quot;blue&quot;, stroke: &quot;red&quot;, strokeWidth:4, strokeDasharray: &quot;3,1&quot;};

class Signal extends React.Component{
  constructor(props){
    super(props);
    this.state = {bar_style: default_bar_style};
    this.barOnMouseLeave = this.barOnMouseLeave.bind(this);
    this.barOnMouseEnter = this.barOnMouseEnter.bind(this);
    this.barOnClick = this.barOnClick.bind(this);
    this._onReplayChange = this._onReplayChange.bind(this);
  }
  
  barOnClick(){
    SimulationAction.replayJumpTo(this.props.signal_data);
  }

  barOnMouseLeave(){
    this.setState({bar_style:default_bar_style});
  }
  barOnMouseEnter(){
    this.setState({bar_style:mouseover_bar_style});
  }

  componentDidMount() {
    this.props.signal_data.on(&quot;REPLAY_UPDATE&quot;, this._onReplayChange);
  }

  componentWillUnmount() {
    this.props.signal_data.removeListener(&quot;REPLAY_UPDATE&quot;, this._onReplayChange);
  }

  _onReplayChange() {
    console.log(&quot;signal replay change&quot;);
    this.setState({is_replay_on:this.props.signal_data.is_replay_on});
  }

  render(){
    //console.log(&quot;Signal is rendering&quot;, this.props, this.state);
    
    var signal_data = this.props.signal_data;
    var path_d;
    var y = 12;
    var lifeline_x = (lifeline)=&gt;{
      var center_x = lifeline.actor.threads[lifeline.thread_id].center_x;
      var position_x = 0;
      if(lifeline.actor.rendering_data)
        position_x = lifeline.actor.rendering_data.position_x;
      return center_x + position_x;
    }
    var from_x = lifeline_x(signal_data.from_lifeline);
    var to_x = lifeline_x(signal_data.to_lifeline);
    var is_self = signal_data.from_lifeline.actor == signal_data.to_lifeline.actor;
    if(is_self){
      path_d = ` M${from_x} ${y} L${to_x + 40} ${y} L${to_x + 40} ${y + 20} L${to_x } ${y + 20}`
    }else{
      path_d = `M${from_x} ${y} L${to_x} ${y}`
    }
    var text_x = (from_x + to_x)/2 - 20;
    var bar_style;
    if(this.state.is_replay_on){
      bar_style = {opacity:0.5, fill:&quot;blue&quot;, stroke: &quot;red&quot;, strokeWidth:6, strokeDasharray: &quot;3,1&quot;};
    }else{
      bar_style = this.state.bar_style;
    }
    return(
      &lt;g ref=&quot;signal_g&quot; transform={&quot;translate(0,&quot; + signal_data.y +&quot;)&quot;}&gt;
        &lt;text x={text_x} y={0}&gt;{signal_data.to_lifeline.method_name}&lt;/text&gt;
        &lt;path d={path_d} stroke=&quot;olivedrab&quot; strokeWidth={2} style={{fill:&apos;none&apos;}} markerEnd=&quot;url(#end)&quot; /&gt;
        &lt;rect ref=&quot;bar&quot; width={this.props.max_width} height={is_self?40:20} y={y-10} x={5} rx={4} ry={4}
              style={bar_style} onClick={this.barOnClick} 
              onMouseEnter={this.barOnMouseEnter} onMouseLeave={this.barOnMouseLeave}/&gt;
      &lt;/g&gt;
    );
  }
}

export default Signal;
</code></pre>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.2.4)</span></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
