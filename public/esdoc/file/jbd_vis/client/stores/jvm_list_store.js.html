<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../../">
  <title data-ice="title">jbd_vis/client/stores/jvm_list_store.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
</head>
<body class="layout-container">

<header>
  <a href="./">Home</a>
  <a href="identifiers.html">Identifier</a>
  <a href="source.html">Source</a>
  
  <a data-ice="repoURL" href="https://github.com/beinan/jbd_vis.git" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div data-ice="classWrap">
  <h2>Class</h2>
  <ul>
    
  <li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/seq_diagram/actor.jsx~Actor.html">Actor</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/actions/admin_action.js~AdminAction.html">AdminAction</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/admin/admin_components.jsx~AdminJobsBox.html">AdminJobsBox</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/admin/admin_monitor_view.jsx~AdminMonitorView.html">AdminMonitorView</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/admin/admin_question_view.jsx~AdminQuestionView.html">AdminQuestionView</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/actions/app_action.js~AppAction.html">AppAction</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/assignment_view.jsx~AssignmentView.html">AssignmentView</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/actions/assignments_action.js~AssignmentsAction.html">AssignmentsAction</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/actions/common_store_action.js~CommonStoreAction.html">CommonStoreAction</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/common_components.jsx~ContentBox.html">ContentBox</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/common_components.jsx~ContentSection.html">ContentSection</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/content_wrapper.jsx~ContentWrapper.html">ContentWrapper</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/replay_controls/control_side_bar.jsx~ControlSideBar.html">ControlSideBar</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/frame.jsx~Frame.html">Frame</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/common_components.jsx~ImmutablePropComponent.html">ImmutablePropComponent</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/actions/jvm_action.js~JVMAction.html">JVMAction</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/stores/job_store.js~JobStore.html">JobStore</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/replay_controls/jvm_list_drowdown.jsx~JvmListDrowDown.html">JvmListDrowDown</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/stores/jvm_store.js~JvmStore.html">JvmStore</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/views/jvms_view.jsx~JvmsView.html">JvmsView</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/seq_diagram/lifeline.jsx~Lifeline.html">Lifeline</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/main_side_bar.jsx~MainSideBar.html">MainSideBar</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/common_components.jsx~PureRenderCommponent.html">PureRenderCommponent</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/replay_controls/replay_panel.jsx~ReplayPanel.html">ReplayPanel</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/stores/replay_store.js~ReplayStore.html">ReplayStore</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/stores/seq_diag_store.js~SeqDiagStore.html">SeqDiagStore</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/seq_diagram/seq_diagram.jsx~SeqDiagram.html">SeqDiagram</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/seq_diagram/signal.jsx~Signal.html">Signal</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/actions/simulation_action.js~SimulationAction.html">SimulationAction</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/views/simulation_view.jsx~SimulationView.html">SimulationView</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/stores/store_factory.js~StoreFactory.html">StoreFactory</a></span></li>
<li data-ice="classDoc"><span><a href="class/jbd_vis/client/components/common_components.jsx~UploadFileForm.html">UploadFileForm</a></span></li>
</ul>
</div>





<div data-ice="variableWrap">
  <h2><a href="variable/">Variable</a></h2>
  <ul>
    
  <li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-AdminJobsStore">AdminJobsStore</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-AppStore">AppStore</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-AssignmentsStore">AssignmentsStore</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-EventEmitter">EventEmitter</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-JvmListStore">JvmListStore</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-SessionStore">SessionStore</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-SimulationStore">SimulationStore</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-actor">actor</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-adminMonitorView">adminMonitorView</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-adminQuestionView">adminQuestionView</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-assignmentView">assignmentView</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-contentWrapper">contentWrapper</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-controlSideBar">controlSideBar</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-frame">frame</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-instance">instance</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-instance">instance</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-instance">instance</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-instance">instance</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-instance">instance</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-instance">instance</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-instance">instance</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-jobStore">jobStore</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-jvmListDrowDown">jvmListDrowDown</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-jvmStore">jvmStore</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-jvmsView">jvmsView</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-lifeline">lifeline</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-mainSideBar">mainSideBar</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-replayPanel">replayPanel</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-replayStore">replayStore</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-seqDiagStore">seqDiagStore</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-seqDiagram">seqDiagram</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-signal">signal</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-simulationView">simulationView</a></span></li>
</ul>
</div>




</nav>

<div class="content" data-ice="content"><h1 data-ice="title">jbd_vis/client/stores/jvm_list_store.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">var AppDispatcher = require(&apos;../app_dispatcher&apos;);
var EventEmitter = require(&apos;events&apos;).EventEmitter;
var ActionType = require(&apos;../action_type&apos;);
var assign = require(&apos;object-assign&apos;);

var getJson = require(&apos;../utils/ajax.js&apos;).getJson;

import JvmStore from &apos;./jvm_store&apos;;

var _jvm_list = {status:&apos;init&apos;, jvm_list:[]};

console.log(&quot;jvmstore&quot;, JvmStore);
var JvmListStore = assign({}, EventEmitter.prototype, {
  
  JVM_UPDATE_EVENT : &apos;jvm_update_event&apos;,
  //ACTIVE_ASSIGNMENT_EVENT : &apos;active_assignment&apos;,
  
  reload: function(page_num, page_size){
    _jvm_list.page_num = page_num;
    _jvm_list.page_size = page_size;
    _jvm_list.status = &quot;loading&quot;;
    JvmListStore.emitChange();
    var params = {start: page_num*page_size, page_size:page_size};
    getJson(&apos;/api/jvms&apos;, params).then((data) =&gt; {
      console.log(data);
      _jvm_list.jvm_list = data.map(function(jvm_process) {
        console.log(jvm_process);
        //return jvm_process;
        return new JvmStore(jvm_process);
      }); 
      console.log(_jvm_list.jvm_list);
      _jvm_list.status = &quot;ready&quot;;
      JvmListStore.emitChange();
    });
  },

  getData: function(){
    return _jvm_list;
  },
  
  emitChange: function() {
    this.emit(this.JVM_UPDATE_EVENT);
  },

  
  addUpdateEventListener: function(callback) {
    this.on(this.JVM_UPDATE_EVENT, callback);
  },

  /**
   * @param {function} callback
   */
  removeUpdateEventListener: function(callback) {
    this.removeListener(this.JVM_UPDATE_EVENT, callback);
  }
});

//load init data into jvm list
JvmListStore.reload(0, 20);

// Register callback to handle all updates
AppDispatcher.register(function(action) {

  switch(action.actionType) {
    case ActionType.QUERY_JVMS:
    _jvm_list.reload(action.page_num, action.page_size);
    break;

    
    default:
      // no op
  }
});


export default JvmListStore;
</code></pre>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.2.4)</span></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
